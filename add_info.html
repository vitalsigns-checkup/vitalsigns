<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-latest.js"></script>
<title>Home Page</title>
<link href="css/add_info.css" rel="stylesheet" type="text/css">
</head>

<body>

<div id="header">
<h1> Vital Signs Checkup System <br> V.S.C.S </h1>
</div>
<div id="nav">
<ul>
<li><a href="index_pat.html">Home</a></li>
<li><a href="index.html" id="logout" >Log Out</a></li>
<li><a class="active" href="add_info.html">Add information</a></li>
<li><a href="scan.html">Scan</a></li>
<li><a href="get_prescription.html">Get Prescription</a></li>
<li><a href="pat_contactform.htm">Contact Us</a></li>
</ul>
</div>
<div id="section">
<br><br><br><br>

<form id="add_info">
<input type="text" name="Age" placeholder="age" id="add_age"><br><br>
BloodType:
<select id="add_blood_type">
<option value="O+">O+</option>
<option value="O-">O-</option>
<option value="A+">A+</option>
<option value="A-">A-</option>
<option value="B+">B+</option>
<option value="B-">B-</option>
<option value="AB+">AB+</option>
<option value="AB-">AB-</option>
</select> <br><br>

<input type="text" name="weight" placeholder="weight in kg" id="add_weight"><br><br>

<input type="text" name="height" placeholder="height in cm" id="add_height"><br><br>
<input type="text" name="address" placeholder="address" id="add_address"><br><br>
<input type="submit" class="button" value="Confirm">
</form>
</div>


<div id="footer">
Copyright &copy; VCSC
</div>
<script>

Parse.initialize("5NlXZEFekfoFAm5GaNlxUbfX7zy8QIIrTvC4FH4m", "4z8FdnGKQ2mXA7X4VR02ItWOxiiv2StezJacPgCR");
    var User = Parse.Object.extend("User");
	var query = new Parse.Query(User);
	var currentUser = Parse.User.current();
	var id = currentUser.id;
	
	$("#logout").click(function(event) {
		
		Parse.User.logOut();
		
		
	});

	    
	
		
		
        
	
	
	$("#add_info").submit(function(event) {
		
		event.preventDefault();
		
		var age = parseFloat($("#add_age").val());
		var weight = parseFloat($("#add_weight").val());
		var height = parseFloat($("#add_height").val());
		var address = $("#add_address").val();
		
		
		var bT = document.getElementById("add_blood_type");
		var bloodType = bT.options[bT.selectedIndex].value;
		
		
	    query.get(id, { 
		
		success: function(user){
			
			      
				  user.set("age", age);
		          user.set("Blood_Type", bloodType);
		          user.set("height", height);
		          user.set("weight", weight);
				  user.set("address", address);
				  
			
		        user.save(null, { success: function(user) {
           alert("Add succesful");
        
      },
      error: function(user, error) {
        alert('Add Failed:'+ error.message);
       }
    });
				
			}, error: function(user,error){
				
				alert("Add error" + error.message);
				}
				
				});
  
	});


</script>
</body>
</html>